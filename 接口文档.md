# 后台接口文档（基于 feedback_app/routes/admin_api.py）

## 基本信息
- 基础地址：`http://127.0.0.1:5000`
- 认证方式：`JWT`，通过登录接口获取 `token`，后续接口在请求头添加：
  - `Authorization: Bearer <token>`

## 接口一：管理员登录
- 路径：`POST /admin/login`
- 请求头：`Content-Type: application/json`
- 请求体：
  ```json
  {
    "username": "admin",
    "password": "123456"
  }
  ```
- 成功响应：`200 OK`
  ```json
  {
    "token": "<JWT>"
  }
  ```
- 失败响应：`401 Unauthorized`
  ```json
  {
    "msg": "invalid credentials"
  }
  ```
- 示例（curl）：
  ```bash
  curl -X POST http://127.0.0.1:5000/admin/login \
    -H "Content-Type: application/json" \
    -d '{"username":"admin","password":"123456"}'
  ```

## 接口二：反馈分页查询
- 路径：`GET /admin/feedback/list`
- 认证：`Authorization: Bearer <JWT>`（必填）
- 查询参数：
  - `page`：页码，整数，默认 `1`
  - `size`：每页数量，整数，默认 `10`，最大 `100`
  - `keyword`：搜索关键字（可选），匹配反馈内容 `content` 的模糊包含
- 成功响应：`200 OK`
  ```json
  {
    "items": [
      {
        "id": 1,
        "content": "示例反馈内容",
        "contact": "test@example.com",
        "ip": "127.0.0.1",
        "create_time": "2025-11-24T12:00:00"
      }
    ],
    "total": 1,
    "pages": 1,
    "page": 1,
    "size": 10
  }
  ```
- 失败响应：`401 Unauthorized`（JWT 缺失或无效）
- 示例（curl）：
  ```bash
  curl "http://127.0.0.1:5000/admin/feedback/list?page=1&size=10&keyword=示例" \
    -H "Authorization: Bearer <JWT>"
  ```

## 字段说明
- `items`：反馈数据列表
  - `id`：主键 ID
  - `content`：反馈内容
  - `contact`：联系方式（可选）
  - `ip`：提交时捕获的客户端 IP（反向代理下优先取 `X-Forwarded-For`/`X-Real-IP`）
  - `create_time`：创建时间，ISO8601 字符串
- 分页字段：
  - `total`：总条数
  - `pages`：总页数
  - `page`：当前页码
  - `size`：当前页大小

## 备注
- 登录账号默认来源于配置：`ADMIN_USERNAME` / `ADMIN_PASSWORD`（可通过环境变量覆盖）
- 分页默认与上限来源于配置：`PAGINATION_DEFAULT_PAGE` / `PAGINATION_DEFAULT_SIZE` / `PAGINATION_MAX_SIZE`
